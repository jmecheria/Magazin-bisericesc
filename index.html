<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Magazinul de Candele & Tradiții</title>
  <!-- jsPDF pentru generarea facturii PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <!-- EmailJS -->
  <script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script type="text/javascript">
    (function(){
      emailjs.init("p2O-tLOxlx3BmOLQf");
    })();
  </script>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
  <style>
    /* Variabile CSS – culori și alte stiluri */
    :root {
      --primary-gradient: linear-gradient(90deg, #b71c1c, #d32f2f);
      --primary-color: #b71c1c;
      --secondary-color: #d32f2f;
      --highlight-color: #ff8a80;
      --button-bg: #e53935;
      --button-hover: #c62828;
      --error-color: #b71c1c;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Merriweather', serif;
      line-height: 1.6;
      background: #fffaf3;
      color: #333;
      scroll-behavior: smooth;
      padding-bottom: 60px;
    }
    /* Header fixat */
    header {
      background: var(--primary-gradient);
      color: #fff;
      padding: 10px 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1100;
    }
    .header-container {
      max-width: 1200px;
      margin: auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    .logo { width: 60px; }
    .header-title { font-size: 28px; margin-left: 10px; }
    nav ul {
      list-style: none;
      display: flex;
      align-items: center;
    }
    nav ul li { margin-left: 20px; }
    nav ul li a {
      text-decoration: none;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      transition: color 0.3s;
    }
    nav ul li a:hover { color: var(--highlight-color); }
    .cart-icon { width: 30px; vertical-align: middle; }
    .cart-count {
      background: #e74c3c;
      color: #fff;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 12px;
      vertical-align: top;
      margin-left: 2px;
    }
    .hamburger {
      display: none;
      font-size: 28px;
      cursor: pointer;
      background: none;
      border: none;
      color: #fff;
    }
    /* Timer fixat sub header */
    #countdown-timer {
      position: fixed;
      top: 70px;
      left: 0;
      width: 100%;
      background: #333;
      color: #fff;
      padding: 10px;
      text-align: center;
      font-size: 22px;
      font-weight: bold;
      z-index: 1050;
      border-bottom: 2px solid var(--primary-color);
    }
    /* Slider, căutare, filtrare, sortare și alte componente existente */
    /* ... (restul CSS-ului existent rămâne neschimbat) ... */
    
    /* Grilă Produse */
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }
    .product-card {
      border: 1px solid #ddd;
      padding: 15px;
      text-align: center;
      background: #fff;
      border-radius: 8px;
      box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: pointer;
      position: relative;
    }
    .product-card:hover {
      transform: scale(1.03);
      box-shadow: 2px 2px 12px rgba(0,0,0,0.2);
    }
    .product-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 4px;
      margin-bottom: 10px;
    }
    .product-card h3 { font-size: 22px; margin-bottom: 5px; }
    .product-card p { font-size: 18px; margin-bottom: 10px; }
    /* Mesajul de stoc se va adăuga în interiorul fiecărui card */
    .stock-label {
      font-weight: bold;
      margin-top: 5px;
    }
    /* Modal pentru detalii produs */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background: rgba(0,0,0,0.5);
    }
    .modal-content {
      background: #fff;
      margin: 10% auto;
      padding: 20px;
      border-radius: 8px;
      max-width: 600px;
      position: relative;
    }
    .modal-content img {
      width: 100%;
      height: auto;
      border-radius: 4px;
      margin-bottom: 15px;
    }
    .modal-close {
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
      font-size: 24px;
      color: #333;
    }
    /* Media queries pentru mobil */
    @media (max-width: 768px) {
      .header-container { flex-direction: column; text-align: center; }
      nav ul { flex-direction: column; display: none; }
      nav ul.active { display: flex; }
      nav ul li { margin: 10px 0; }
      .hamburger { display: block; }
      .slider, .slides img { height: 220px; }
      .overlay { height: 220px; }
      #search-container input { width: 90%; }
    }
  </style>
</head>
<body>
  <!-- Header fixat -->
  <header>
    <div class="header-container">
      <img src="logo.jpg" alt="Logo" class="logo">
      <span class="header-title">Magazinul de Candele & Tradiții</span>
      <button class="hamburger" onclick="toggleMenu()">&#9776;</button>
      <nav>
        <ul id="nav-menu">
          <li><a onclick="showPage('home')">Acasă</a></li>
          <li><a onclick="showPage('produse')">Produse</a></li>
          <li><a onclick="showPage('despre-noi')">Despre Noi</a></li>
          <li><a onclick="showPage('termeni-si-conditii')">Termeni & Condiții</a></li>
          <li>
            <a onclick="showPage('cos')">
              <img src="cos.jpg" alt="Coș" class="cart-icon">
              <span class="cart-count" id="cart-count">0</span>
            </a>
          </li>
          <li><a onclick="showPage('evenimente')">Evenimente</a></li>
          <!-- Opțional: Link către pagina de admin (back-office) -->
          <li><a href="admin.html" target="_blank">Admin</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Timer fixat sub header -->
  <div id="countdown-timer">
    <span id="timer"></span>
  </div>

  <!-- Conținutul paginilor -->
  <div id="pages">
    <!-- Pagina Acasă -->
    <section id="home" class="active fade-in">
      <div class="slider">
        <div class="slides">
          <img src="icoană1.jpg" alt="Slider 1" class="active">
          <img src="lumânare.jpg" alt="Slider 2">
          <img src="candela-mare.jpg" alt="Slider 3">
        </div>
        <div class="overlay">
          <button class="btn-shop" onclick="showPage('produse')">Vezi Produsele</button>
        </div>
        <div class="slider-indicators">
          <button onclick="setSlide(0)" id="indicator-0" class="active"></button>
          <button onclick="setSlide(1)" id="indicator-1"></button>
          <button onclick="setSlide(2)" id="indicator-2"></button>
        </div>
      </div>
      <h2>Bine ai venit la Magazinul de Candele & Tradiții</h2>
      <p class="content-text">
        Descoperă colecția noastră de lumânări, accesorii și produse tradiționale care aduc lumină și inspirație spirituală.
      </p>
    </section>

    <!-- Pagina Produse -->
    <section id="produse" class="fade-in">
      <h2 id="prod-title">Produsele Noastre</h2>
      <div id="search-container">
        <input type="text" id="product-search" placeholder="Caută produs..." onkeyup="searchProducts()">
      </div>
      <button id="filter-toggle" onclick="toggleFilter()">Filtre</button>
      <button id="sort-toggle" onclick="toggleSort()">Sortare</button>
      <div id="filter-bar">
        <button onclick="filterProducts('all')">Toate</button>
        <button onclick="filterProducts('candele')">Candele</button>
        <button onclick="filterProducts('lumânări')">Lumânări</button>
        <button onclick="filterProducts('tămâie')">Tămâie</button>
        <button onclick="filterProducts('accesorii')">Accesorii</button>
        <button onclick="filterProducts('icoane')">Icoane</button>
      </div>
      <div id="sort-bar">
        <button onclick="sortProducts('asc')">Preț: Crescător</button>
        <button onclick="sortProducts('desc')">Preț: Descrescător</button>
        <button onclick="sortProducts('alpha')">Alfabetic</button>
      </div>
      <div class="product-grid" id="product-grid">
        <!-- Exemplu produs 1: Candelă Mare -->
        <div class="product-card" data-category="candele" data-description="Această candelă mare, realizată din ceară naturală, oferă o lumină caldă, ideală pentru momente de rugăciune." data-stock="5">
          <img src="candela-mare.jpg" alt="Candelă Mare">
          <h3>Candelă Mare</h3>
          <p>Preț: 50 lei</p>
          <!-- Acest paragraf va fi completat de funcția updateStockDisplay() -->
          <p class="stock-label"></p>
        </div>
        <!-- Exemplu produs 2 -->
        <div class="product-card" data-category="lumânări" data-description="Lumânare aromată cu esență naturală." data-stock="0">
          <img src="lumânare.jpg" alt="Lumânare Aromată">
          <h3>Lumânare Aromată</h3>
          <p>Preț: 30 lei</p>
          <p class="stock-label"></p>
        </div>
        <!-- Se pot adăuga mai multe carduri de produse cu atributele data necesare -->
      </div>
      <p id="no-products" class="no-products" style="display:none;">Nu există produse pentru filtrarea selectată.</p>
    </section>
    
    <!-- Celelalte pagini (Despre Noi, Termeni & Condiții, Evenimente etc.) rămân neschimbate -->
    <!-- ... -->
  </div>

  <!-- Fereastra modală pentru detalii produs -->
  <div id="product-modal" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal()">&times;</span>
      <img id="modal-image" src="" alt="Detalii produs">
      <h3 id="modal-title"></h3>
      <p id="modal-description"></p>
      <p id="modal-stock"></p>
    </div>
  </div>

  <!-- Scripturile JavaScript -->
  <script>
    // Funcții pentru navigarea paginilor (din codul original)
    function showPage(pageId) {
      var pages = document.querySelectorAll('#pages section');
      pages.forEach(function(page) {
        page.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
    }
    function toggleMenu() {
      document.getElementById('nav-menu').classList.toggle('active');
    }
    // (Funcții existente: searchProducts(), filterProducts(), sortProducts(), setSlide(), etc.)

    /* --- Funcționalitatea de afișare a detaliilor produsului în modal --- */
    function openModal(product) {
      var modal = document.getElementById('product-modal');
      var modalImage = document.getElementById('modal-image');
      var modalTitle = document.getElementById('modal-title');
      var modalDescription = document.getElementById('modal-description');
      var modalStock = document.getElementById('modal-stock');

      modalImage.src = product.querySelector('img').src;
      modalTitle.textContent = product.querySelector('h3').textContent;
      modalDescription.textContent = product.getAttribute('data-description');

      var stock = parseInt(product.getAttribute('data-stock'));
      if(stock <= 0) {
        modalStock.textContent = "Produsul nu mai este pe stoc.";
        modalStock.style.color = "red";
      } else {
        modalStock.textContent = "Stoc disponibil: " + stock;
        modalStock.style.color = "green";
      }
      modal.style.display = "block";
    }
    function closeModal() {
      document.getElementById('product-modal').style.display = "none";
    }
    // Atașarea evenimentului de click fiecărui card de produs
    document.addEventListener('DOMContentLoaded', function() {
      var productCards = document.querySelectorAll('.product-card');
      productCards.forEach(function(card) {
        card.addEventListener('click', function() {
          openModal(card);
        });
      });
      updateStockDisplay();
    });
    // Actualizează afișarea stocului pe fiecare card de produs
    function updateStockDisplay() {
      var productCards = document.querySelectorAll('.product-card');
      productCards.forEach(function(card) {
        var stock = parseInt(card.getAttribute('data-stock'));
        var stockLabel = card.querySelector('.stock-label');
        if(stock <= 0) {
          stockLabel.textContent = "Nu este pe stoc";
          stockLabel.style.color = "red";
        } else {
          stockLabel.textContent = "In stoc: " + stock;
          stockLabel.style.color = "green";
        }
      });
    }
    
    // Exemplu de verificare a stocului la adăugarea în coș (logica completă ar trebui să fie implementată în funcție de cerințe)
    function addToCart(product, quantity) {
      var stock = parseInt(product.getAttribute('data-stock'));
      if(quantity > stock) {
        alert("Nu există suficient stoc!");
      } else {
        // Se actualizează stocul (simulare)
        product.setAttribute('data-stock', stock - quantity);
        updateStockDisplay();
        alert("Produs adăugat în coș!");
      }
    }
    
    // (Alte scripturi existente, cum ar fi pentru slider, timer, etc.)
  </script>
</body>
</html>
